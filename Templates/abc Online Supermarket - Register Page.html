<!DOCTYPE html>
<html lang="en">


<head>
<meta charset="utf-8"/>
<title>abc Online Supermarket - Register Page</title>
<link rel="stylesheet" href="main website style.css"> <!--All classes refer to this css -->
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> <!-- Faded Animation reference-->
</head>


<body>
<img src="Image/Background Logo/Company Logo.png" alt="Company Logo" class="company-logo"> 

<!-- Login function -->
<button class="login-btn" onclick="document.getElementById('login_form').style.display='block'"><h1><b>Login</b></h1></button>
<div id="login_form" class="modal">
  <form class="modal-content animate" action="http://localhost:5000/login" method="post">
    <div class="imgcontainer">
      <span onclick="document.getElementById('login_form').style.display='none'" class="close" title="Close Modal">&times;</span>
      <img src="Image/Background Logo/Login Logo.png" alt="User" class="user">
    </div>

    <div class="login_container">
      <div class="label_font_size">
      <label><b>Username</b></label>
        <i>
          <input type="text" placeholder=" Enter your username" name="user_name" id="user_name" autocomplete="off" required>
        </i>
      </div>

      <p class="label_font_size">
      <label><b>Password</b></label>
        <i>
          <input type="password" placeholder=" Enter your password" name="password" id="password" required>
        </i>
      </p>

      <p>
        <b><input type="submit" class="inside-login_btn" value="Login"></b>
      </p>

      <br>
      <br>
       
    </div> 

      <div class="down_container">
        <pre style="line-height: 18px">    
       <a href="abc Online Supermarket - Register Page.html" style="color: blue; font-size: 18px">Sign Up</a>                                <a href="abc Online Supermarket - Find Password.html" style="color: black; cursor: pointer; font-size: 18px">Forget Password?</a>
        </pre> 
        <br>      
      </div>     
  </form>
</div>
<p>

<div class="navigation-bar">
  <a href="abc Online Supermarket - Home Page.html">Home</a>

  <div class="dropdown">
    <button class="dropbtn_non_product_page">Product</button>
    <div class="dropdown-content">
      <a href="abc Online Supermarket - Product(Fruits) Page.html">Fruits</a>
      <a href="abc Online Supermarket - Product(Snacks) Page.html">Snacks</a>
      <a href="abc Online Supermarket - Product(Drinks and Beverages) Page.html">Drinks and Beverages</a>
      <a href="abc Online Supermarket - Product(Wines) Page.html">Wines</a>
      <a href="abc Online Supermarket - Product(Cleaning Supllies, Health and Beauty) Page.html">Cleaning Supplies, Health and Beauty</a>
      <a href="abc Online Supermarket - Product(Pets) Page.html">Pets</a>
    </div>
  </div>  

  <a href="abc Online Supermarket - Contact Us Page.html">Contact Us</a>
  <a href="abc Online Supermarket - About Us Page.html">About Us</a>
  <a href="abc Online Supermarket - Jobs Page.html">Jobs</a>
  <a class="active" href="abc Online Supermarket - Register Page.html">Register</a> 
  <a href="abc Online Supermarket - Help Page.html">Help</a>

<form onsubmit="return false">
  <div class="search-container">
    <input id="search_product_value" type="text" placeholder="Search a Product" oninput="find_product()" 
      onmouseleave="not_click_search()" autocomplete="off" required> 
    <div id="product_list"></div>
  </div>    
</div>

  <div class="navigation-bar-search-logo">
    <input type="image" onclick="search_product()" src="Image/Button Logo/Search Logo.png" alt="search_product" width = 48 height = 43>
  </div>
</form>

<div class="shopping-cart-logo">
  <form action="abc Online Supermarket - Shopping Cart Page.html">
    <input type="image" src="Image/Button Logo/Shopping Cart Logo.png" alt="shopping cart" width = 55 height = 43>
    <div id="shopping_cart_logo_notification"></div>
  </form>
</div>


<style> 
.name {
  font-size: 20px;
  margin: 6px;
  box-sizing: border-box;
  border: none;
  border-bottom: 2px solid grey;
}

.email {
  font-size: 20px;
  margin: 6px;
  box-sizing: border-box;
  border: none;
  border-bottom: 2px solid grey;
}

.password {
  font-size: 20px;
  margin: 6px;
  box-sizing: border-box;
  border: none;
  border-bottom: 2px solid grey;
}

.date {
  margin: 12px;
}
</style>


<script>
//Check all validity
function check_validity() {
  var date1 = new Date(new Date().toLocaleDateString());                            //Today date
  var date2 = new Date(document.getElementById("DoB").value.replaceAll("-", "/"));  //Input date
  var difference_in_time  = date1.getTime() - date2.getTime();                      //To calculate the time difference of two dates 
  var difference_in_days  = difference_in_time / (1000 * 3600 * 24);                //To calculate the number of days between two dates
  var difference_in_years = difference_in_days / 365;                               //To calculate the number of years between two dates
  document.getElementById("age").value = difference_in_years

  if (document.getElementById("fname").value.length > 20)  
    { 
      document.getElementById("fname").setCustomValidity("Maximum length of first name is 20!");
      document.getElementById("fname").oninput = 
      function reset_valid() {document.getElementById("fname").setCustomValidity('')}
    }

  if (document.getElementById("lname").value.length > 20)  
    { 
      document.getElementById("lname").setCustomValidity("Maximum length of last name is 20!");
      document.getElementById("lname").oninput = 
      function reset_valid() {document.getElementById("lname").setCustomValidity('')}
    }

  if (document.getElementById("uname").value.length > 45)  
    { 
      document.getElementById("uname").setCustomValidity("Maximum length of user name is 45!");
      document.getElementById("uname").oninput = 
      function reset_valid() {document.getElementById("uname").setCustomValidity('')}
    }

  if (document.getElementById("1st_password").value.length > 45)  
    { 
      document.getElementById("1st_password").setCustomValidity("Maximum length of password is 45!");
      document.getElementById("1st_password").oninput = 
      function reset_valid() {document.getElementById("1st_password").setCustomValidity('')}
    }    

  //Check if password and comfirm password match 
  if (document.getElementById("1st_password").value != document.getElementById("re_password").value) {
    document.getElementById("re_password").setCustomValidity("Passwords do not match!");
    document.getElementById("re_password").oninput = 
    function reset_valid() {document.getElementById("re_password").setCustomValidity('')}
    }

  //Check if more than 16 years old
  if (difference_in_years < 16) {
    document.getElementById("DoB").setCustomValidity("You must be at least 16 years old to join!");
    document.getElementById("DoB").oninput = 
    function reset_valid() {document.getElementById("DoB").setCustomValidity('')}       
  }

  //If all input valid, send register request and reload page
  if (document.getElementById("fname").checkValidity() == true & document.getElementById("lname").checkValidity() == true & 
      document.getElementById("uname").checkValidity() == true & document.getElementById("1st_password").checkValidity() == true &
      document.getElementById("re_password").checkValidity() == true & document.getElementById("DoB").checkValidity() == true)
    {location.reload()}
}


function sign_up() {
  document.getElementById("sign_up_div").style.display = 'block';
  document.getElementById("sign_up_form").innerHTML = 
  `
  <div class="imgcontainer" style="margin: 10px 0 12px 0;">
    <span onclick="document.getElementById('sign_up_div').style.display='none'" class="close" title="Close Modal">&times;</span>
  </div>

  <img src="Image/Background Logo/Register Member Logo.png" alt="Register Member Logo" 
  style="display: block; margin-left: auto; margin-right: auto">  

  <pre>     <input type="text" class="name" name="fname" id="fname" placeholder="First Name" autocomplete="off" required>    <input type="text" class="name" name="lname" id="lname" placeholder="Last Name" autocomplete="off" required></pre>

  <pre>     <input type="email" class="email" name="uname" id="uname" placeholder="User Name (email address)" style="width: 522px" autocomplete="off" required></pre>

  <pre>     <input type="password" class="password" placeholder="Password" name="_password" id="1st_password" autocomplete="off" minlength="8" required>    <input type="password" class="password" placeholder="Comfirm Password" id="re_password" autocomplete="off" required></pre>

  <pre>     <a style="font-size: 20px; margin: 8px">Date of Birth:</a> <input type="date" class="date" name="DoB" id="DoB" placeholder="Date of Birth" onclick="" autocomplete="off" required></pre>

  <input type="image" id="register_btn" src="Image/Button Logo/Register Logo.png" alt="Register Member Logo" 
  style="display: block; margin-left: auto; margin-right: auto; cursor: pointer; outline: none" width=256 height=100
  onclick="check_validity()"> 
  
  <input type="hidden" name="age" id="age">

  <pre style="font-size: 15px">         By creating an account you agree to our <a href="https://displaydistribute.com/terms-conditions-and-privacy-policy/" style="color: blue">Terms & Privacy</a></pre>
  `
}
</script>  


<div style="font-size: 120px; color: white; position: absolute; top: 220px; left: 500px"><b>Join Us</b></div>
<input type="image" src="Image/Button Logo/Sign Up Logo.png" alt="Sign Up Button" 
style="position: absolute; top: 420px; left: 650px; border-radius: 45px; outline: none" width=200 height=200 onclick="sign_up()"> 

<img src="Image/Background Logo/Supermarket Logo 2.png" alt="Supermarket Logo 2" style="width:100%; height:100%">


<!-- Use the login form "modal" as a reference of sign up form-->
<div id="sign_up_div" class="modal">
  <form id="sign_up_form" class="modal-content animate" action="http://localhost:5000/member_register" 
  style="height: 694px" method='post'>
  </form>
</div>


<script src="Product List and Search Function.js"></script>  <!--All search product list and search function refer to this js -->
<script src="Cart Logo Change Function.js"></script> <!-- The shopping cart logo will change according to this function -->

</body>

</html>
